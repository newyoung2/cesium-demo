(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d09fa668"],{"06b2":function(e,t,n){"use strict";var i=n("b804"),r=n("21e0");e.exports="".repeat||function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"2b17":function(e,t,n){"use strict";n("c4a2")},3022:function(e,t,n){var i=n("c7d8");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},9700:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"cesiumContainer"}},[n("div",{staticClass:"tool-box"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.reset(t)}}},[e._v("重置")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.startDraw(t)}}},[e._v("画点")]),n("el-input-number",{attrs:{size:"mini",step:.2,min:0,max:10,label:"描述文字"},model:{value:e.sharpness,callback:function(t){e.sharpness=t},expression:"sharpness"}}),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.reDrawArea(t)}}},[e._v("重绘")])],1)])},r=[],o=(n("1564"),n("e3c0"),n("acc5")),a=n("5e1a"),s=(n("5b17"),null),l=null,c=null,u={name:"load3DTiles",props:{},data:function(){return{sharpness:.85,tileset:null,pointArr:[],degreeArr:[],degreeHeight:[],isDrawPoint:!1,geojson:[]}},computed:{},watch:{},components:{},created:function(){},mounted:function(){this.init()},methods:{init:function(){var e=this,t={infoBox:!1,selectionIndicator:!1,geocoder:!1,homeButton:!1,timeline:!1,navigationHelpButton:!1,fullscreenButton:!1,scene3DOnly:!0,baseLayerPicker:!1,animation:!1,terrainProvider:new o["i"]({url:o["K"].fromAssetId(3956)})};s=new o["rb"]("cesiumContainer",t),s._cesiumWidget._creditContainer.style.display="none",s.scene.globe.depthTestAgainstTerrain=!0,s.scene,e.load3DTileModel(),e.addLeftClickEvent()},startDraw:function(){this.isDrawPoint=!0,s.scene.screenSpaceCameraController.enableRotate=!1,s.scene.screenSpaceCameraController.enableTranslate=!1,s.scene.screenSpaceCameraController.enableTilt=!1},load3DTileModel:function(){var e=new o["bb"]({url:"test/Scene/Production_6.json"});console.log(e),l=new o["h"]({url:"test/Scene/Production_6.json",maximumScreenSpaceError:4,maximumNumberOfLoadedTiles:1e3}),s.scene.primitives.add(l),l.readyPromise.then((function(e){var t=e.boundingSphere,n=o["f"].fromCartesian(t.center),i=o["e"].fromRadians(n.longitude,n.latitude,n.height),r=o["e"].fromRadians(o["P"].toRadians(106.709183),o["P"].toRadians(26.562819),-32),a=o["e"].subtract(r,i,new o["e"]);e.modelMatrix=o["R"].fromTranslation(a),s.zoomTo(e)}))},addLeftClickEvent:function(){var e=this;c=new o["eb"](s.scene.canvas),c.setInputAction((function(t){var n=s.scene.pickPosition(t.position),i=o["f"].fromCartesian(n),r=o["P"].toDegrees(i.longitude),a=o["P"].toDegrees(i.latitude),l=i.height;e.isDrawPoint&&e.drawPoint(n,[r,a],l)}),o["fb"].LEFT_CLICK),c.setInputAction((function(t){var n=s.scene.pickPosition(t.position),i=o["f"].fromCartesian(n);o["P"].toDegrees(i.longitude),o["P"].toDegrees(i.latitude),i.height;e.isDrawPoint&&e.drawPolygon(n)}),o["fb"].RIGHT_CLICK)},drawPoint:function(e,t,n){this.degreeArr.push(t),this.degreeHeight=n,this.pointArr.push(e);var i=s.entities.add({position:e,point:{pixelSize:10,color:o["q"].BLUE,outlineWidth:2,outlineColor:o["q"].WHITE}});return i},computedArea:function(e){var t=JSON.parse(JSON.stringify(e));t.push(t[0]);var n=a["polygon"]([t]),i=a["area"](n);return i},reDrawArea:function(){s.entities.removeAll(),this.drawPolygon()},drawPolygon:function(){var e=this,t=a["lineString"](this.degreeArr);console.log(this.sharpness);var n=a["bezierSpline"](t,{sharpness:this.sharpness}),i=[];n.geometry.coordinates.map((function(t){i.push(t[0]),i.push(t[1]),i.push(e.degreeHeight)}));var r=this.computedArea(n.geometry.coordinates),l=s.entities.add({position:this.pointArr[0],label:{text:"".concat(r.toFixed(2),"㎡"),font:"14pt monospace",style:o["N"].FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:o["pb"].BOTTOM,pixelOffset:new o["d"](0,-9)},polygon:{hierarchy:o["e"].fromDegreesArrayHeights(i),material:o["q"].MEDIUMAQUAMARINE.withAlpha(.5),perPositionHeight:!0},polyline:{positions:o["e"].fromDegreesArrayHeights(i),width:2.5,show:!0,material:new o["W"]({color:o["q"].TOMATO.withAlpha(.8),outlineWidth:1,outlineColor:o["q"].TOMATO.withAlpha(.8)})}});return l},reset:function(){s.entities.removeAll(),this.pointArr=[],this.degreeArr=[],this.degreeHeight="",this.geojson=[],this.isDrawPoint=!1,s.scene.screenSpaceCameraController.enableRotate=!0,s.scene.screenSpaceCameraController.enableTranslate=!0,s.scene.screenSpaceCameraController.enableTilt=!0},drawBillboard:function(e,t){e.z=e.z+50;var n=s.entities.add({name:"Citizens Bank Park",position:e,point:{pixelSize:5,color:o["q"].RED,outlineColor:o["q"].WHITE,outlineWidth:2},label:{text:"Citizens Bank Park",font:"14pt monospace",style:o["N"].FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:o["pb"].BOTTOM,pixelOffset:new o["d"](0,-9)}});return n}}},p=u,d=(n("2b17"),n("c701")),h=Object(d["a"])(p,i,r,!1,null,"222b3ef9",null);t["default"]=h.exports},c4a2:function(e,t,n){},e3c0:function(e,t,n){"use strict";var i=n("485e"),r=n("b804"),o=n("3022"),a=n("06b2"),s=n("aad0"),l=1..toFixed,c=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},p=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},d=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));i({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,n,i,s,l=o(this),d=r(e),h=[0,0,0,0,0,0],f="",m="0",g=function(e,t){var n=-1,i=t;while(++n<6)i+=e*h[n],h[n]=i%1e7,i=c(i/1e7)},b=function(e){var t=6,n=0;while(--t>=0)n+=h[t],h[t]=c(n/e),n=n%e*1e7},w=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==h[e]){var n=String(h[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(t=p(l*u(2,69,1))-69,n=t<0?l*u(2,-t,1):l/u(2,t,1),n*=4503599627370496,t=52-t,t>0){g(0,n),i=d;while(i>=7)g(1e7,0),i-=7;g(u(10,i,1),0),i=t-1;while(i>=23)b(1<<23),i-=23;b(1<<i),g(1,1),b(2),m=w()}else g(0,n),g(1<<-t,0),m=w()+a.call("0",d);return d>0?(s=m.length,m=f+(s<=d?"0."+a.call("0",d-s)+m:m.slice(0,s-d)+"."+m.slice(s-d))):m=f+m,m}})}}]);
//# sourceMappingURL=chunk-d09fa668.3b8dc0dd.js.map