{"version":3,"sources":["webpack:///./src/views/particle/rain.vue?6e71","webpack:///src/views/particle/rain.vue","webpack:///./src/views/particle/rain.vue?ba8d","webpack:///./src/views/particle/rain.vue","webpack:///./src/views/particle/rain.vue?20ad"],"names":["rainImageSize","rainSystem","scene","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","viewer","rainParticleSize","rainRadius","name","props","data","count","mounted","init","methods","Cesium","shouldAnimate","terrainProvider","_cesiumWidget","_creditContainer","style","display","camera","setView","destination","orientation","heading","pitch","addParticleSystem","rainGravityScratch","rainUpdate","particle","dt","position","distance","endColor","alpha","modelMatrix","speed","lifetime","emitter","startScale","endScale","image","emissionRate","startColor","imageSize","updateCallback","primitives","add","skyAtmosphere","hueShift","saturationShift","brightnessShift","fog","density","minimumBrightness","component"],"mappings":"mJAAA,ICWIA,EACAC,EAGAC,EDfAC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,uBAClHC,EAAkB,G,YCOlBC,G,UAAS,MACTC,EAAmB,GACnBC,EAAa,IAMjB,GAFA,WAEA,CACEC,KAAM,QACNC,MAAO,GACPC,KAHF,WAII,MAAO,CACLC,MAAO,IAGXC,QARF,WASId,KAAKe,QAEPC,QAAS,CACPD,KADJ,WAEMR,EAAS,IAAIU,EAAnB,0BACQC,eAAe,EACfC,gBAAiBF,EAAzB,UAEMV,EAAOa,cAAcC,iBAAiBC,MAAMC,QAAU,OACtDhB,EAAOV,MAAM2B,OAAOC,QAAQ,CAC1BC,YAAa,IAAIT,EAAzB,KACA,iBACA,kBACA,oBAEQU,YAAa,CACXC,QAAS,kBACTC,OAAQ,sBAGZ7B,KAAK8B,qBAEPA,kBApBJ,WAqBMjC,EAAQU,EAAOV,MACfF,EAAgB,IAAIsB,EAA1B,KACA,EACA,KAGM,IAAIc,EAAqB,IAAId,EAAnC,KAgBM,SAASe,EAAWC,EAAUC,GAE5BH,EAAqBd,EAA7B,eACA,WACA,GAEQc,EAAqBd,EAA7B,sBACA,GACA,KACA,GAGQgB,EAASE,SAAWlB,EAA5B,SACA,WACA,EACA,YAIQ,IAAImB,EAAWnB,EAAvB,cACA,kBACA,YAGUgB,EAASI,SAASC,MADhBF,EAAW3B,EACa,EAGpC,0BA1CMb,EAAa,IAAIqB,EAAvB,MACQsB,YAAa,IAAItB,EAAzB,wCACQuB,OAAQ,EACRC,SAAU,GACVC,QAAS,IAAIzB,EAArB,SACQ0B,WAAY,EACZC,SAAU,EACVC,MAAO,mCACPC,aAAc,IACdC,WAAY,IAAI9B,EAAxB,kBACQoB,SAAU,IAAIpB,EAAtB,oBACQ+B,UAAWrD,EACXsD,eAAgBjB,IAiClBzB,EAAOV,MAAMqD,WAAWC,IAAIvD,GAG5BW,EAAOV,MAAMuD,cAAcC,UAAY,IACvC9C,EAAOV,MAAMuD,cAAcE,gBAAkB,IAC7C/C,EAAOV,MAAMuD,cAAcG,iBAAmB,GAE9ChD,EAAOV,MAAM2D,IAAIC,QAAU,MAC3BlD,EAAOV,MAAM2D,IAAIE,kBAAoB,QC5GsZ,I,wBCQ7bC,EAAY,eACd,EACA7D,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAqD,E,6CCnBf","file":"js/chunk-5fd54b18.00328349.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cesiumContainer1\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"cesiumContainer1\">\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Cesium from \"cesium/Cesium\";\r\nimport widget from \"cesium/Widgets/widgets.css\";\r\nvar viewer = null;\r\nvar rainParticleSize = 15.0;\r\nvar rainRadius = 100000.0;\r\nvar rainImageSize;\r\nvar rainSystem;\r\n\r\nvar rainGravityScratch = new Cesium.Cartesian3();\r\nvar scene;\r\nexport default {\r\n  name: \"model\",\r\n  props: {},\r\n  data() {\r\n    return {\r\n      count: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      viewer = new Cesium.Viewer(\"cesiumContainer1\", {\r\n        shouldAnimate: true,\r\n        terrainProvider: Cesium.createWorldTerrain(),\r\n      });\r\n      viewer._cesiumWidget._creditContainer.style.display = \"none\"; // 隐藏版权\r\n      viewer.scene.camera.setView({\r\n        destination: new Cesium.Cartesian3(\r\n          277096.634865404,\r\n          5647834.481964232,\r\n          2985563.7039122293\r\n        ),\r\n        orientation: {\r\n          heading: 4.731089976107251,\r\n          pitch: -0.32003481981370063,\r\n        },\r\n      });\r\n      this.addParticleSystem();\r\n    },\r\n    addParticleSystem() {\r\n      scene = viewer.scene;\r\n      rainImageSize = new Cesium.Cartesian2(\r\n        rainParticleSize,\r\n        rainParticleSize * 2.0\r\n      );\r\n\r\n      var rainGravityScratch = new Cesium.Cartesian3();\r\n      rainSystem = new Cesium.ParticleSystem({\r\n        modelMatrix: new Cesium.Matrix4.fromTranslation(scene.camera.position),\r\n        speed: -1.0,\r\n        lifetime: 15.0,\r\n        emitter: new Cesium.SphereEmitter(rainRadius),\r\n        startScale: 1.0,\r\n        endScale: 0.0,\r\n        image: \"SampleData/circular_particle.png\",\r\n        emissionRate: 9000.0,\r\n        startColor: new Cesium.Color(0.27, 0.5, 0.7, 0.0),\r\n        endColor: new Cesium.Color(0.27, 0.5, 0.7, 0.98),\r\n        imageSize: rainImageSize,\r\n        updateCallback: rainUpdate,\r\n      });\r\n\r\n      function rainUpdate(particle, dt) {\r\n        /* 使粒子像受重力影响一样的落下 */\r\n        rainGravityScratch = Cesium.Cartesian3.normalize(\r\n          particle.position,\r\n          rainGravityScratch\r\n        );\r\n        rainGravityScratch = Cesium.Cartesian3.multiplyByScalar(\r\n          rainGravityScratch,\r\n          -1050.0,\r\n          rainGravityScratch\r\n        );\r\n\r\n        particle.position = Cesium.Cartesian3.add(\r\n          particle.position,\r\n          rainGravityScratch,\r\n          particle.position\r\n        );\r\n        \r\n        /* 检测粒子距离相机的距离，距离越远，粒子越模糊（透明度越大），就像一种随距离加重的雾效果 */\r\n        var distance = Cesium.Cartesian3.distance(\r\n          scene.camera.position,\r\n          particle.position\r\n        );\r\n        if (distance > rainRadius) {\r\n          particle.endColor.alpha = 0.0;\r\n        } else {\r\n          particle.endColor.alpha =\r\n            rainSystem.endColor.alpha / (distance / rainRadius + 0.1);\r\n        }\r\n      }\r\n      viewer.scene.primitives.add(rainSystem);\r\n\r\n      //确保整个环境和场景匹配，我们修改大气和雾效果和下雨天匹配。下面代码修改为深蓝色天空，还有一点薄雾。\r\n      viewer.scene.skyAtmosphere.hueShift = -0.97;\r\n      viewer.scene.skyAtmosphere.saturationShift = 0.25;\r\n      viewer.scene.skyAtmosphere.brightnessShift = -0.4;\r\n\r\n      viewer.scene.fog.density = 0.00025;\r\n      viewer.scene.fog.minimumBrightness = 0.01;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#cesiumContainer1 {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100vh;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./rain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./rain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rain.vue?vue&type=template&id=93bbaf7e&scoped=true&\"\nimport script from \"./rain.vue?vue&type=script&lang=js&\"\nexport * from \"./rain.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rain.vue?vue&type=style&index=0&id=93bbaf7e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"93bbaf7e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./rain.vue?vue&type=style&index=0&id=93bbaf7e&scoped=true&lang=css&\""],"sourceRoot":""}