{"version":3,"sources":["webpack:///./node_modules/_core-js@3.8.0@core-js/internals/string-repeat.js","webpack:///./node_modules/_core-js@3.8.0@core-js/internals/this-number-value.js","webpack:///./src/views/other/measureLineSpace.vue?0c27","webpack:///src/views/other/measureLineSpace.vue","webpack:///./src/views/other/measureLineSpace.vue?3d7a","webpack:///./src/views/other/measureLineSpace.vue","webpack:///./src/views/other/measureLineSpace.vue?4212","webpack:///./src/util/cesiumUtil.js","webpack:///./node_modules/_core-js@3.8.0@core-js/modules/es.number.to-fixed.js"],"names":["toInteger","requireObjectCoercible","module","exports","repeat","count","str","String","this","result","n","Infinity","RangeError","classof","value","TypeError","res","render","_vm","_h","$createElement","_c","_self","attrs","staticStyle","on","$event","stopPropagation","clear","_v","staticRenderFns","viewer","handler","props","data","mounted","init","methods","Cesium","infoBox","selectionIndicator","geocoder","homeButton","timeline","navigationHelpButton","fullscreenButton","scene3DOnly","baseLayerPicker","animation","imageryProvider","url","_cesiumWidget","_creditContainer","style","display","scene","camera","flyTo","destination","orientation","heading","pitch","component","measureLineSpace","cesiumWidget","screenSpaceEventHandler","removeInputAction","LEFT_DOUBLE_CLICK","_imageryLayerCollection","positions","poly","distance","cartesian","entities","removeAll","setInputAction","movement","ray","getPickRay","endPosition","globe","pick","length","pop","push","PolyLinePrimitive","getSpaceDistance","MOUSE_MOVE","position","clone","textDisance","add","name","point","pixelSize","color","RED","outlineColor","WHITE","outlineWidth","label","text","font","fillColor","GOLD","FILL_AND_OUTLINE","verticalOrigin","BOTTOM","pixelOffset","LEFT_CLICK","RIGHT_CLICK","_","options","polyline","show","material","CHARTREUSE","width","clampToGround","_init","prototype","_update","i","point1cartographic","fromCartesian","point2cartographic","geodesic","setEndPoints","s","surfaceDistance","Math","sqrt","pow","height","toFixed","measureAreaSpace","tempPoints","polygon","console","log","PolygonPrimitive","pickPosition","cartographic","longitudeString","toDegrees","longitude","latitudeString","latitude","heightString","lng","lat","hei","heightReference","CLAMP_TO_GROUND","textArea","computeSignedArea","hierarchy","GREEN","withAlpha","path","radius","len","total","prev","prevTanLat","tan","PI","prevLng","tanLat","polarTriangleArea","abs","tan1","lng1","tan2","lng2","deltaLng","t","atan2","sin","cos","$","thisNumberValue","fails","nativeToFixed","floor","x","acc","x2","FORCED","call","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign","multiply","c","index","c2","divide","dataToString","slice"],"mappings":"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","file":"js/chunk-33ff066c.d691947c.js","sourcesContent":["'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cesiumContainer\"}},[_c('el-button',{staticStyle:{\"position\":\"absolute\",\"right\":\"8vh\",\"top\":\"2vh\",\"z-index\":\"100\"},attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.clear($event)}}},[_vm._v(\"清除\")]),_c('div',{attrs:{\"id\":\"cesiumContainer1\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"cesiumContainer\">\r\n      <el-button type=\"primary\" size=\"mini\" @click.stop=\"clear\" style=\"position:absolute;right:8vh;top:2vh;z-index:100;\">清除</el-button>\r\n      <div id=\"cesiumContainer1\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Cesium from \"cesium/Cesium\";\r\nimport widget from \"cesium/Widgets/widgets.css\";\r\nimport util from '../../util/cesiumUtil'\r\nvar viewer = null;\r\nvar handler = null\r\nvar res\r\nexport default {\r\n  props: {},\r\n  data() {\r\n    return {\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      viewer = new Cesium.Viewer(\"cesiumContainer1\", {\r\n        infoBox: false,\r\n        selectionIndicator: false,\r\n        geocoder: false, // 地理位置查询定位控件\r\n        homeButton: false, // 默认相机位置控件\r\n        timeline: false, // 时间滚动条控件\r\n        navigationHelpButton: false, // 默认的相机控制提示控件\r\n        fullscreenButton: false, // 全屏控件\r\n        scene3DOnly: true, // 每个几何实例仅以3D渲染以节省GPU内存\r\n        baseLayerPicker: true, // 底图切换控件\r\n        animation: false, // 控制场景动画的播放速度控件\r\n        imageryProvider: new Cesium.ArcGisMapServerImageryProvider({\r\n          url:\r\n            \"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer\",\r\n        }),\r\n      });\r\n      viewer._cesiumWidget._creditContainer.style.display = \"none\"; // 隐藏版权\r\n      viewer.scene.camera.flyTo({\r\n        destination: Cesium.Cartesian3.fromDegrees(121.506377, 31.245105, 750),\r\n        orientation: {\r\n          heading: Cesium.Math.toRadians(20),\r\n          pitch: Cesium.Math.toRadians(-20),\r\n        },\r\n      }); \r\n      \r\n      res = util.measureLineSpace(viewer,handler)\r\n\r\n    //   util.measureAreaSpace(viewer,handler)\r\n    },\r\n    clear(){\r\n        res.clear()\r\n       \r\n    }\r\n   \r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#cesiumContainer1,#cesiumContainer {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100vh;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./measureLineSpace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./measureLineSpace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./measureLineSpace.vue?vue&type=template&id=31f72340&scoped=true&\"\nimport script from \"./measureLineSpace.vue?vue&type=script&lang=js&\"\nexport * from \"./measureLineSpace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./measureLineSpace.vue?vue&type=style&index=0&id=31f72340&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31f72340\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.5@vue-loader/lib/index.js??vue-loader-options!./measureLineSpace.vue?vue&type=style&index=0&id=31f72340&scoped=true&lang=css&\"","import * as Cesium from \"cesium/Cesium\";\r\nimport widget from \"cesium/Widgets/widgets.css\";\r\n\r\nexport default {\r\n    \r\n  //测量空间直线距离 \r\n  /******************************************* */\r\n  measureLineSpace(viewer, handler) {\r\n    // 取消双击事件-追踪该位置\r\n    viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n    \r\n    handler = new Cesium.ScreenSpaceEventHandler(viewer.scene._imageryLayerCollection);\r\n    var positions = [];\r\n    var poly = null;\r\n    // var tooltip = document.getElementById(\"toolTip\");\r\n    var distance = 0;\r\n    var cartesian = null;\r\n    var floatingPoint;\r\n    // tooltip.style.display = \"block\";\r\n\r\n    handler.setInputAction(function (movement) {\r\n      // tooltip.style.left = movement.endPosition.x + 3 + \"px\";\r\n      // tooltip.style.top = movement.endPosition.y - 25 + \"px\";\r\n      // tooltip.innerHTML = '<p>单击开始，右击结束</p>';\r\n      // cartesian = viewer.scene.pickPosition(movement.endPosition);\r\n      let ray = viewer.camera.getPickRay(movement.endPosition);\r\n      cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n      //cartesian = viewer.scene.camera.pickEllipsoid(movement.endPosition, viewer.scene.globe.ellipsoid);\r\n      if (positions.length >= 2) {\r\n        if (!Cesium.defined(poly)) {\r\n          poly = new PolyLinePrimitive(positions);\r\n        } else {\r\n          positions.pop();\r\n          // cartesian.y += (1 + Math.random());\r\n          positions.push(cartesian);\r\n        }\r\n        distance = getSpaceDistance(positions);\r\n        // console.log(\"distance: \" + distance);\r\n        // tooltip.innerHTML='<p>'+distance+'米</p>';\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);\r\n\r\n    handler.setInputAction(function (movement) {\r\n      // tooltip.style.display = \"none\";\r\n      // cartesian = viewer.scene.camera.pickEllipsoid(movement.position, viewer.scene.globe.ellipsoid);\r\n      // cartesian = viewer.scene.pickPosition(movement.position);\r\n      let ray = viewer.camera.getPickRay(movement.position);\r\n      cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n      if (positions.length == 0) {\r\n        positions.push(cartesian.clone());\r\n      }\r\n      positions.push(cartesian);\r\n      //在三维场景中添加Label\r\n      //   var cartographic = Cesium.Cartographic.fromCartesian(cartesian);\r\n      var textDisance = distance + \"米\";\r\n      // console.log(textDisance + \",lng:\" + cartographic.longitude/Math.PI*180.0);\r\n      floatingPoint = viewer.entities.add({\r\n        name: '空间直线距离',\r\n        // position: Cesium.Cartesian3.fromDegrees(cartographic.longitude / Math.PI * 180, cartographic.latitude / Math.PI * 180,cartographic.height),\r\n        position: positions[positions.length - 1],\r\n        point: {\r\n          pixelSize: 5,\r\n          color: Cesium.Color.RED,\r\n          outlineColor: Cesium.Color.WHITE,\r\n          outlineWidth: 2,\r\n        },\r\n        label: {\r\n          text: textDisance,\r\n          font: '18px sans-serif',\r\n          fillColor: Cesium.Color.GOLD,\r\n          style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n          outlineWidth: 2,\r\n          verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\r\n          pixelOffset: new Cesium.Cartesian2(20, -20),\r\n        }\r\n      });\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n\r\n    handler.setInputAction(function (movement) {\r\n    //   handler.destroy(); //关闭事件句柄\r\n       positions.pop(); //最后一个点无效\r\n       positions = [];\r\n       poly = null;\r\n       distance = 0;\r\n       cartesian = null;\r\n       floatingPoint;\r\n      // viewer.entities.remove(floatingPoint);\r\n      // tooltip.style.display = \"none\";\r\n\r\n    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK);\r\n    \r\n    // 清除已画的线段\r\n    function clear() {\r\n        positions = [];\r\n       poly = null;\r\n       distance = 0;\r\n       cartesian = null;\r\n       floatingPoint;\r\n        viewer.entities.removeAll()\r\n    }\r\n\r\n    var PolyLinePrimitive = (function () {\r\n      function _(positions) {\r\n        this.options = {\r\n          name: '直线',\r\n          polyline: {\r\n            show: true,\r\n            positions: [],\r\n            material: Cesium.Color.CHARTREUSE,\r\n            width: 5,\r\n            clampToGround: true\r\n          }\r\n        };\r\n        this.positions = positions;\r\n        this._init();\r\n      }\r\n\r\n      _.prototype._init = function () {\r\n        var _self = this;\r\n        var _update = function () {\r\n          return _self.positions;\r\n        };\r\n        //实时更新polyline.positions\r\n        this.options.polyline.positions = new Cesium.CallbackProperty(_update, false);\r\n        viewer.entities.add(this.options);\r\n      };\r\n\r\n      return _;\r\n    })();\r\n\r\n    //空间两点距离计算函数\r\n    function getSpaceDistance(positions) {\r\n      var distance = 0;\r\n      for (var i = 0; i < positions.length - 1; i++) {\r\n\r\n        var point1cartographic = Cesium.Cartographic.fromCartesian(positions[i]);\r\n        var point2cartographic = Cesium.Cartographic.fromCartesian(positions[i + 1]);\r\n        /**根据经纬度计算出距离**/\r\n        var geodesic = new Cesium.EllipsoidGeodesic();\r\n        geodesic.setEndPoints(point1cartographic, point2cartographic);\r\n        var s = geodesic.surfaceDistance;\r\n        //console.log(Math.sqrt(Math.pow(distance, 2) + Math.pow(endheight, 2)));\r\n        //返回两点之间的距离\r\n        s = Math.sqrt(Math.pow(s, 2) + Math.pow(point2cartographic.height - point1cartographic.height, 2));\r\n        distance = distance + s;\r\n      }\r\n      return distance.toFixed(2);\r\n    }\r\n\r\n    return {clear}\r\n  },\r\n\r\n  //****************************测量空间面积************************************************//\r\n  measureAreaSpace(viewer, handler){  \r\n  // 取消双击事件-追踪该位置\r\n  viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n  // 鼠标事件\r\n    handler = new Cesium.ScreenSpaceEventHandler(viewer.scene._imageryLayerCollection);\r\n    var positions = [];\r\n    var tempPoints = [];\r\n    var polygon = null;\r\n    // var tooltip = document.getElementById(\"toolTip\");\r\n    var cartesian = null;\r\n    var floatingPoint;//浮动点\r\n    // tooltip.style.display = \"block\";\r\n    \r\n    handler.setInputAction(function(movement){\r\n        // tooltip.style.left = movement.endPosition.x + 3 + \"px\";\r\n        // tooltip.style.top = movement.endPosition.y - 25 + \"px\";\r\n    // tooltip.innerHTML ='<p>单击开始，右击结束</p>';\r\n        // cartesian = viewer.scene.pickPosition(movement.endPosition); \r\n      let ray = viewer.camera.getPickRay(movement.endPosition);\r\n      cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n     \r\n        //cartesian = viewer.scene.camera.pickEllipsoid(movement.endPosition, viewer.scene.globe.ellipsoid);\r\n        if(positions.length >= 2){\r\n            \r\n            if (!Cesium.defined(polygon)) {\r\n                console.log(positions)\r\n                polygon = new PolygonPrimitive(positions);\r\n            }else{\r\n                positions.pop();\r\n                // cartesian.y += (1 + Math.random());\r\n                positions.push(cartesian);\r\n            }\r\n            // tooltip.innerHTML='<p>'+distance+'米</p>';\r\n        }\r\n    },Cesium.ScreenSpaceEventType.MOUSE_MOVE);\r\n    \r\n    handler.setInputAction(function(movement){\r\n        // tooltip.style.display = \"none\";\r\n        // cartesian = viewer.scene.pickPosition(movement.position); \r\n      //   console.log(movement)\r\n      // let ray = viewer.camera.getPickRay(movement.position);\r\n      // cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n\r\n      cartesian = viewer.scene.pickPosition(movement.position)\r\n        // cartesian = viewer.scene.camera.pickEllipsoid(movement.position, viewer.scene.globe.ellipsoid);\r\n        if(positions.length == 0) {\r\n            positions.push(cartesian.clone());\r\n        }\r\n        //positions.pop();\r\n        positions.push(cartesian);\r\n        console.log(cartesian)\r\n        //在三维场景中添加点\r\n        var cartographic = Cesium.Cartographic.fromCartesian(positions[positions.length - 1]);\r\n        var longitudeString = Cesium.Math.toDegrees(cartographic.longitude);\r\n        var latitudeString = Cesium.Math.toDegrees(cartographic.latitude);\r\n        var heightString = cartographic.height;\r\n        tempPoints.push({ lng: longitudeString, lat: latitudeString ,hei:heightString});\r\n        console.log(tempPoints)\r\n        floatingPoint = viewer.entities.add({\r\n            name : '多边形面积',\r\n            position : positions[positions.length - 1],         \r\n            point : {\r\n                pixelSize : 5,\r\n                color : Cesium.Color.RED,\r\n                outlineColor : Cesium.Color.WHITE,\r\n                outlineWidth : 2,\r\n                heightReference:Cesium.HeightReference.CLAMP_TO_GROUND \r\n            }\r\n        }); \r\n    },Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n     \r\n    handler.setInputAction(function(movement){\r\n        // handler.destroy();\r\n        positions.pop();\r\n        \r\n        //tempPoints.pop();\r\n        // viewer.entities.remove(floatingPoint);\r\n        // tooltip.style.display = \"none\";\r\n        //在三维场景中添加点\r\n        // var cartographic = Cesium.Cartographic.fromCartesian(positions[positions.length - 1]);\r\n        // var longitudeString = Cesium.Math.toDegrees(cartographic.longitude);\r\n        // var latitudeString = Cesium.Math.toDegrees(cartographic.latitude);\r\n        // var heightString = cartographic.height;\r\n        // tempPoints.push({ lon: longitudeString, lat: latitudeString ,hei:heightString});\r\n \r\n        var textArea = computeSignedArea(tempPoints);\r\n        viewer.entities.add({\r\n            name : '多边形面积',\r\n            position : positions[positions.length - 1],\r\n            // point : {\r\n            //  pixelSize : 5,\r\n            //  color : Cesium.Color.RED,\r\n            //  outlineColor : Cesium.Color.WHITE,\r\n            //  outlineWidth : 2,\r\n            //  heightReference:Cesium.HeightReference.CLAMP_TO_GROUND \r\n            // },\r\n            label : {\r\n                text : textArea,\r\n                font : '18px sans-serif',\r\n                fillColor : Cesium.Color.GOLD,\r\n                style: Cesium.LabelStyle.FILL_AND_OUTLINE,\r\n                outlineWidth : 2,\r\n                verticalOrigin : Cesium.VerticalOrigin.BOTTOM,\r\n        pixelOffset : new Cesium.Cartesian2(20, -40),\r\n        heightReference:Cesium.HeightReference.CLAMP_TO_GROUND\r\n            }\r\n        });     \r\n\r\n        positions = [];\r\n        tempPoints = [];\r\n        polygon = null;\r\n        // var tooltip = document.getElementById(\"toolTip\");\r\n        cartesian = null;\r\n        floatingPoint;//浮动点\r\n\r\n    }, Cesium.ScreenSpaceEventType.RIGHT_CLICK );   \r\n\r\n    // 清除已画的线段\r\n    function clear() {\r\n        positions = [];\r\n        tempPoints = [];\r\n        polygon = null;\r\n        // var tooltip = document.getElementById(\"toolTip\");\r\n        cartesian = null;\r\n        floatingPoint;//浮动点\r\n        viewer.entities.removeAll()\r\n    }\r\n    \r\n    var PolygonPrimitive = (function(){\r\n        function _(positions){\r\n            this.options = {\r\n                name:'多边形',\r\n                polygon : {\r\n                    hierarchy : [],\r\n                    // perPositionHeight : true,\r\n                    material : Cesium.Color.GREEN.withAlpha(0.5),\r\n          // heightReference:20000\r\n                }\r\n            };\r\n            this.hierarchy = new Cesium.PolygonHierarchy(positions);\r\n            this._init();\r\n        }\r\n    \r\n        _.prototype._init = function(){\r\n            var _self = this;\r\n            var _update = function(){\r\n                return _self.hierarchy;\r\n            };\r\n            //实时更新polygon.hierarchy\r\n            this.options.polygon.hierarchy = new Cesium.CallbackProperty(_update,false);\r\n            viewer.entities.add(this.options);\r\n        };\r\n    \r\n        return _;\r\n    })();\r\n \r\n    // js根据经纬度计算水平面积\r\n    function computeSignedArea(path) {\r\n        // //传入path：{\r\n        //     [{lat:,lng:}],[{lat:,lng:}],[{lat:,lng:}]\r\n        // }\r\n            let radius= 6371009\r\n            let len = path.length;\r\n            if (len < 3) return 0; \r\n            let total = 0;\r\n            let  prev = path[len - 1];\r\n            let prevTanLat = Math.tan(((Math.PI / 2 - prev.lat/180*Math.PI) / 2));\r\n            let prevLng = (prev.lng)/180*Math.PI;\r\n            for (let i in path) {\r\n                let tanLat = Math.tan((Math.PI / 2 -\r\n                    (path[i].lat)/180*Math.PI) / 2);\r\n                let lng = (path[i].lng)/180*Math.PI;\r\n                total += polarTriangleArea(tanLat, lng, prevTanLat, prevLng);\r\n                prevTanLat = tanLat;\r\n                prevLng = lng;\r\n            }\r\n            if(Math.abs(total * (radius * radius))>100000){\r\n                return `${(Math.abs(total * (radius * radius))/1000000.0).toFixed(4)}平方公里`   //平方公里\r\n            }else{\r\n                return `${Math.abs(total * (radius * radius)).toFixed(4)}平方米`;   //平方米\r\n            }\r\n            \r\n            \r\n        }\r\n\r\n        function polarTriangleArea(tan1,lng1,tan2,lng2) {\r\n                let deltaLng = lng1 - lng2;\r\n                let t = tan1 * tan2;\r\n                return 2 * Math.atan2(t * Math.sin(deltaLng), 1 + t * Math.cos(deltaLng));\r\n        }\r\n\r\n    return {clear}\r\n  }\r\n\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n"],"sourceRoot":""}