(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b09aa33"],{"07c6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"cesiumContainer1"}},[r("div",{attrs:{id:"cesiumContainer"}}),r("div",{attrs:{id:"ThreeContainer"}})])}];r("3610"),r("1564"),r("c585"),r("6a61");function a(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,i)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(e){a(s,n,i,o,u,"next",e)}function u(e){a(s,n,i,o,u,"throw",e)}o(void 0)}))}}var o,u=r("acc5"),c=r("3bc2"),l=function(){function e(e){c["L"].call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new s(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new i(e)})),this.register((function(e){return new h(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(c["L"].prototype),{constructor:e,load:function(e,t,r,n){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:c["M"].extractUrlBase(e),this.manager.itemStart(e);var s=function(t){n?n(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},o=new c["t"](this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(r){try{a.parse(r,i,(function(r){t(r),a.manager.itemEnd(e)}),s)}catch(n){s(n)}}),r,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,i,s){var o,u={},l={};if("string"===typeof e)o=e;else{var h=c["M"].decodeText(new Uint8Array(e,0,4));if(h===p){try{u[r.KHR_BINARY_GLTF]=new m(e)}catch(E){return void(s&&s(E))}o=u[r.KHR_BINARY_GLTF].content}else o=c["M"].decodeText(new Uint8Array(e))}var d=JSON.parse(o);if(void 0===d.asset||d.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var f=new G(d,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(var y=0;y<this.pluginCallbacks.length;y++){var w=this.pluginCallbacks[y](f);l[w.name]=w,u[w.name]=!0}if(d.extensionsUsed)for(y=0;y<d.extensionsUsed.length;++y){var _=d.extensionsUsed[y],b=d.extensionsRequired||[];switch(_){case r.KHR_MATERIALS_UNLIT:u[_]=new a;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[_]=new T;break;case r.KHR_DRACO_MESH_COMPRESSION:u[_]=new v(d,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:u[_]=new n(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:u[_]=new g;break;case r.KHR_MESH_QUANTIZATION:u[_]=new x;break;default:b.indexOf(_)>=0&&void 0===l[_]&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}f.setExtensions(u),f.setPlugins(l),f.parse(i,s)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function i(e){this.parser=e,this.name=r.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=r.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=r.KHR_MATERIALS_CLEARCOAT}function o(e){this.parser=e,this.name=r.KHR_MATERIALS_TRANSMISSION}function u(e){this.parser=e,this.name=r.KHR_TEXTURE_BASISU}function l(e){this.parser=e,this.name=r.EXT_TEXTURE_WEBP,this.isSupported=null}function h(e){this.name=r.EXT_MESHOPT_COMPRESSION,this.parser=e}i.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],r=0,n=t.length;r<n;r++){var i=t[r];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}},i.prototype._loadLight=function(e){var t=this.parser,r="light:"+e,n=t.cache.get(r);if(n)return n;var i,a=t.json,s=a.extensions&&a.extensions[this.name]||{},o=s.lights||[],u=o[e],l=new c["n"](16777215);void 0!==u.color&&l.fromArray(u.color);var h=void 0!==u.range?u.range:0;switch(u.type){case"directional":i=new c["p"](l),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new c["fb"](l),i.distance=h;break;case"spot":i=new c["vb"](l),i.distance=h,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,i.angle=u.spot.outerConeAngle,i.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return i.position.set(0,0,0),i.decay=2,void 0!==u.intensity&&(i.intensity=u.intensity),i.name=t.createUniqueName(u.name||"light_"+e),n=Promise.resolve(i),t.cache.add(r,n),n},i.prototype.createNodeAttachment=function(e){var t=this,r=this.parser,n=r.json,i=n.nodes[e],a=i.extensions&&i.extensions[this.name]||{},s=a.light;return void 0===s?null:this._loadLight(s).then((function(e){return r._getNodeRef(t.cache,s,e)}))},a.prototype.getMaterialType=function(){return c["T"]},a.prototype.extendParams=function(e,t,r){var n=[];e.color=new c["n"](1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&n.push(r.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(n)},s.prototype.getMaterialType=function(e){var t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?c["V"]:null},s.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=[],a=n.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new c["Eb"](s,-s)}return Promise.all(i)},o.prototype.getMaterialType=function(e){var t=this.parser,r=t.json.materials[e];return r.extensions&&r.extensions[this.name]?c["V"]:null},o.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)},u.prototype.loadTexture=function(e){var t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var i=n.extensions[this.name],a=r.images[i.source],s=t.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,s)},l.prototype.loadTexture=function(e){var t=this.name,r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],s=n.images[a.source],o=s.uri?r.options.manager.getHandler(s.uri):r.textureLoader;return this.detectSupport().then((function(i){if(i)return r.loadTextureImage(e,s,o);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))},l.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},h.prototype.loadBufferView=function(e){var t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){var n=r.extensions[this.name],i=this.parser.getDependency("buffer",n.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then((function(e){var t=n.byteOffset||0,r=n.byteLength||0,i=n.count,s=n.byteStride,o=new ArrayBuffer(i*s),u=new Uint8Array(e[0],t,r);return a.decodeGltfBuffer(new Uint8Array(o),i,s,u,n.mode,n.filter),o}))}return null};var p="glTF",d=12,f={JSON:1313821514,BIN:5130562};function m(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,d);if(this.header={magic:c["M"].decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==p)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var n=this.header.length-d,i=new DataView(e,d),a=0;while(a<n){var s=i.getUint32(a,!0);a+=4;var o=i.getUint32(a,!0);if(a+=4,o===f.JSON){var u=new Uint8Array(e,d+a,s);this.content=c["M"].decodeText(u)}else if(o===f.BIN){var l=d+a;this.body=e.slice(l,l+s)}a+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function v(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function g(){this.name=r.KHR_TEXTURE_TRANSFORM}function y(e){c["W"].call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new c["n"]).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var o in s)e.uniforms[o]=s[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function T(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return y},extendParams:function(e,t,r){var n=t.extensions[this.name];e.color=new c["n"](1,1,1),e.opacity=1;var i=[];if(Array.isArray(n.diffuseFactor)){var a=n.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==n.diffuseTexture&&i.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new c["n"](0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new c["n"](1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var s=n.specularGlossinessTexture;i.push(r.assignTexture(e,"glossinessMap",s)),i.push(r.assignTexture(e,"specularMap",s))}return Promise.all(i)},createMaterial:function(e){var t=new y(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=c["xb"],e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function x(){this.name=r.KHR_MESH_QUANTIZATION}function w(e,t,r,n){c["A"].call(this,e,t,r,n)}v.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},u={};for(var c in a){var l=R[c]||c.toLowerCase();s[l]=a[c]}for(c in e.attributes){l=R[c]||c.toLowerCase();if(void 0!==a[c]){var h=r.accessors[e.attributes[c]],p=b[h.componentType];u[l]=p,o[l]=!0===h.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],i=o[r];void 0!==i&&(n.normalized=i)}t(e)}),s,u)}))}))},g.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},y.prototype=Object.create(c["W"].prototype),y.prototype.constructor=y,y.prototype.copy=function(e){return c["W"].prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},w.prototype=Object.create(c["A"].prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n*3+n,a=0;a!==n;a++)t[a]=r[i+a];return t},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,u=3*s,c=n-t,l=(r-t)/c,h=l*l,p=h*l,d=e*u,f=d-u,m=-2*p+3*h,v=p-h,g=1-m,y=v-h+l,T=0;T!==s;T++){var x=a[f+T+s],w=a[f+T+o]*c,_=a[d+T+s],b=a[d+T]*c;i[T]=g*x+y*w+m*_+v*b}return i};var _={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},b={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E={9728:c["Y"],9729:c["I"],9984:c["ab"],9985:c["K"],9986:c["Z"],9987:c["J"]},M={33071:c["m"],33648:c["X"],10497:c["mb"]},S={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},R={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},L={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},A={CUBICSPLINE:void 0,LINEAR:c["C"],STEP:c["B"]},I={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function O(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function P(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new c["W"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:c["v"]})),e["DefaultMaterial"]}function C(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function N(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function F(e,t,r){for(var n=!1,i=!1,a=0,s=t.length;a<s;a++){var o=t[a];if(void 0!==o.POSITION&&(n=!0),void 0!==o.NORMAL&&(i=!0),n&&i)break}if(!n&&!i)return Promise.resolve(e);var u=[],c=[];for(a=0,s=t.length;a<s;a++){o=t[a];if(n){var l=void 0!==o.POSITION?r.getDependency("accessor",o.POSITION):e.attributes.position;u.push(l)}if(i){l=void 0!==o.NORMAL?r.getDependency("accessor",o.NORMAL):e.attributes.normal;c.push(l)}}return Promise.all([Promise.all(u),Promise.all(c)]).then((function(t){var r=t[0],a=t[1];return n&&(e.morphAttributes.position=r),i&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}function k(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(r=0,n=i.length;r<n;r++)e.morphTargetDictionary[i[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function D(e){var t,n=e.extensions&&e.extensions[r.KHR_DRACO_MESH_COMPRESSION];return t=n?"draco:"+n.bufferView+":"+n.indices+":"+U(n.attributes):e.indices+":"+U(e.attributes)+":"+e.mode,t}function U(e){for(var t="",r=Object.keys(e).sort(),n=0,i=r.length;n<i;n++)t+=r[n]+":"+e[r[n]]+";";return t}function G(e,r){this.json=e||{},this.extensions={},this.plugins={},this.options=r||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new c["x"](this.options.manager):this.textureLoader=new c["Ab"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new c["t"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function H(e,t,r){var n=t.attributes,i=new c["f"];if(void 0!==n.POSITION){var a=r.json.accessors[n.POSITION],s=a.min,o=a.max;if(void 0!==s&&void 0!==o){i.set(new c["Fb"](s[0],s[1],s[2]),new c["Fb"](o[0],o[1],o[2]));var u=t.targets;if(void 0!==u){for(var l=new c["Fb"],h=new c["Fb"],p=0,d=u.length;p<d;p++){var f=u[p];if(void 0!==f.POSITION){a=r.json.accessors[f.POSITION],s=a.min,o=a.max;void 0!==s&&void 0!==o?(h.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),h.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),h.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),l.max(h)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}e.boundingBox=i;var m=new c["sb"];i.getCenter(m.center),m.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function j(e,t,r){var n=t.attributes,i=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var s in n){var o=R[s]||s.toLowerCase();o in e.attributes||i.push(a(n[s],o))}if(void 0!==t.indices&&!e.index){var u=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return N(e,t),H(e,t,r),Promise.all(i).then((function(){return void 0!==t.targets?F(e,t.targets,r):e}))}function B(e,t){var r=e.getIndex();if(null===r){var n=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)n.push(a);e.setIndex(n),r=e.getIndex()}var s=r.count-2,o=[];if(t===c["Bb"])for(a=1;a<=s;a++)o.push(r.getX(0)),o.push(r.getX(a)),o.push(r.getX(a+1));else for(a=0;a<s;a++)a%2===0?(o.push(r.getX(a)),o.push(r.getX(a+1)),o.push(r.getX(a+2))):(o.push(r.getX(a+2)),o.push(r.getX(a+1)),o.push(r.getX(a)));o.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(o),u}return G.prototype.setExtensions=function(e){this.extensions=e},G.prototype.setPlugins=function(e){this.plugins=e},G.prototype.parse=function(e,t){var r=this,n=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};C(i,a,n),N(a,n),e(a)})).catch(t)},G.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n=0,i=t.length;n<i;n++)for(var a=t[n].joints,s=0,o=a.length;s<o;s++)e[a[s]].isBone=!0;for(var u=0,c=e.length;u<c;u++){var l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(r[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}},G.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},G.prototype._getNodeRef=function(e,t,r){if(e.refs[t]<=1)return r;var n=r.clone();return n.name+="_instance_"+e.uses[t]++,n},G.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var r=0;r<t.length;r++){var n=e(t[r]);if(n)return n}},G.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var r=[],n=0;n<t.length;n++){var i=e(t[n]);i&&r.push(i)}return r},G.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(O(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))},G.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var i=[];return void 0!==n.bufferView?i.push(this.getDependency("bufferView",n.bufferView)):i.push(null),void 0!==n.sparse&&(i.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,a,s=e[0],o=S[n.type],u=b[n.componentType],l=u.BYTES_PER_ELEMENT,h=l*o,p=n.byteOffset||0,d=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(d&&d!==h){var m=Math.floor(p/d),v="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+m+":"+n.count,g=t.cache.get(v);g||(i=new u(s,m*d,n.count*d/l),g=new c["y"](i,d/l),t.cache.add(v,g)),a=new c["z"](g,o,p%d/l,f)}else i=null===s?new u(n.count*o):new u(s,p,n.count*o),a=new c["h"](i,o,f);if(void 0!==n.sparse){var y=S.SCALAR,T=b[n.sparse.indices.componentType],x=n.sparse.indices.byteOffset||0,w=n.sparse.values.byteOffset||0,_=new T(e[1],x,n.sparse.count*y),E=new u(e[2],w,n.sparse.count*o);null!==s&&(a=new c["h"](a.array.slice(),a.itemSize,a.normalized));for(var M=0,R=_.length;M<R;M++){var L=_[M];if(a.setX(L,E[M*o]),o>=2&&a.setY(L,E[M*o+1]),o>=3&&a.setZ(L,E[M*o+2]),o>=4&&a.setW(L,E[M*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},G.prototype.loadTexture=function(e){var t,n,i=this,a=this.json,s=this.options,o=a.textures[e],u=o.extensions||{};return t=u[r.MSFT_TEXTURE_DDS]?a.images[u[r.MSFT_TEXTURE_DDS].source]:a.images[o.source],t.uri&&(n=s.manager.getHandler(t.uri)),n||(n=u[r.MSFT_TEXTURE_DDS]?i.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,n)},G.prototype.loadTextureImage=function(e,t,r){var n=this,i=this.json,a=this.options,s=i.textures[e],o=self.URL||self.webkitURL,u=t.uri,l=!1,h=!0;return"image/jpeg"===t.mimeType&&(h=!1),void 0!==t.bufferView&&(u=n.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var r=new DataView(e,25,1).getUint8(0,!1);h=6===r||4===r||3===r}l=!0;var n=new Blob([e],{type:t.mimeType});return u=o.createObjectURL(n),u}))),Promise.resolve(u).then((function(e){return new Promise((function(t,n){var i=t;!0===r.isImageBitmapLoader&&(i=function(e){t(new c["j"](e))}),r.load(O(e,a.path),i,void 0,n)}))})).then((function(t){!0===l&&o.revokeObjectURL(u),t.flipY=!1,s.name&&(t.name=s.name),h||(t.format=c["lb"]);var r=i.samplers||{},a=r[s.sampler]||{};return t.magFilter=E[a.magFilter]||c["I"],t.minFilter=E[a.minFilter]||c["J"],t.wrapS=M[a.wrapS]||c["mb"],t.wrapT=M[a.wrapT]||c["mb"],n.associations.set(t,{type:"textures",index:e}),t}))},G.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[r.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;if(s){var o=i.associations.get(a);a=i.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,s),i.associations.set(a,o)}}e[t]=a}))},G.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,n=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,o=Object.keys(t.morphAttributes).length>0,u=o&&void 0!==t.morphAttributes.normal;if(e.isPoints){var l="PointsMaterial:"+r.uuid,h=this.cache.get(l);h||(h=new c["hb"],c["P"].prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,h.sizeAttenuation=!1,this.cache.add(l,h)),r=h}else if(e.isLine){l="LineBasicMaterial:"+r.uuid;var p=this.cache.get(l);p||(p=new c["F"],c["P"].prototype.copy.call(p,r),p.color.copy(r.color),this.cache.add(l,p)),r=p}if(n||i||a||s||o){l="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),s&&(l+="skinning:"),n&&(l+="vertex-tangents:"),i&&(l+="vertex-colors:"),a&&(l+="flat-shading:"),o&&(l+="morph-targets:"),u&&(l+="morph-normals:");var d=this.cache.get(l);d||(d=r.clone(),s&&(d.skinning=!0),i&&(d.vertexColors=!0),a&&(d.flatShading=!0),o&&(d.morphTargets=!0),u&&(d.morphNormals=!0),n&&(d.vertexTangents=!0,d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(l,d),this.associations.set(d,this.associations.get(r))),r=d}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r},G.prototype.getMaterialType=function(){return c["W"]},G.prototype.loadMaterial=function(e){var t,n=this,i=this.json,a=this.extensions,s=i.materials[e],o={},u=s.extensions||{},l=[];if(u[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=h.getMaterialType(),l.push(h.extendParams(o,s,n))}else if(u[r.KHR_MATERIALS_UNLIT]){var p=a[r.KHR_MATERIALS_UNLIT];t=p.getMaterialType(),l.push(p.extendParams(o,s,n))}else{var d=s.pbrMetallicRoughness||{};if(o.color=new c["n"](1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){var f=d.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}void 0!==d.baseColorTexture&&l.push(n.assignTexture(o,"map",d.baseColorTexture)),o.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,o.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(n.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),l.push(n.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===s.doubleSided&&(o.side=c["r"]);var m=s.alphaMode||I.OPAQUE;return m===I.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,m===I.MASK&&(o.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==c["T"]&&(l.push(n.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new c["Eb"](1,-1),void 0!==s.normalTexture.scale&&o.normalScale.set(s.normalTexture.scale,-s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==c["T"]&&(l.push(n.assignTexture(o,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==c["T"]&&(o.emissive=(new c["n"]).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==c["T"]&&l.push(n.assignTexture(o,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var i;return i=t===y?a[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),s.name&&(i.name=s.name),i.map&&(i.map.encoding=c["Ib"]),i.emissiveMap&&(i.emissiveMap.encoding=c["Ib"]),N(i,s),n.associations.set(i,{type:"materials",index:e}),s.extensions&&C(a,i,s),i}))},G.prototype.createUniqueName=function(e){for(var t=c["ib"].sanitizeNodeName(e||""),r=t,n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r},G.prototype.loadGeometries=function(e){var t=this,n=this.extensions,i=this.primitiveCache;function a(e){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return j(r,e,t)}))}for(var s=[],o=0,u=e.length;o<u;o++){var l,h=e[o],p=D(h),d=i[p];if(d)s.push(d.promise);else l=h.extensions&&h.extensions[r.KHR_DRACO_MESH_COMPRESSION]?a(h):j(new c["i"],h,t),i[p]={primitive:h,promise:l},s.push(l)}return Promise.all(s)},G.prototype.loadMesh=function(e){for(var t=this,r=this.json,n=this.extensions,i=r.meshes[e],a=i.primitives,s=[],o=0,u=a.length;o<u;o++){var l=void 0===a[o].material?P(this.cache):this.getDependency("material",a[o].material);s.push(l)}return s.push(t.loadGeometries(a)),Promise.all(s).then((function(r){for(var s=r.slice(0,r.length-1),o=r[r.length-1],u=[],l=0,h=o.length;l<h;l++){var p,d=o[l],f=a[l],m=s[l];if(f.mode===_.TRIANGLES||f.mode===_.TRIANGLE_STRIP||f.mode===_.TRIANGLE_FAN||void 0===f.mode)p=!0===i.isSkinnedMesh?new c["rb"](d,m):new c["S"](d,m),!0===m.isMeshStandardMaterial&&m.side===c["r"]&&null!==d.getIndex()&&!0===d.hasAttribute("position")&&!0===d.hasAttribute("normal")&&!0===d.hasAttribute("uv")&&!1===d.hasAttribute("tangent")&&(d.computeTangents(),m.vertexTangents=!0),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),f.mode===_.TRIANGLE_STRIP?p.geometry=B(p.geometry,c["Cb"]):f.mode===_.TRIANGLE_FAN&&(p.geometry=B(p.geometry,c["Bb"]));else if(f.mode===_.LINES)p=new c["H"](d,m);else if(f.mode===_.LINE_STRIP)p=new c["E"](d,m);else if(f.mode===_.LINE_LOOP)p=new c["G"](d,m);else{if(f.mode!==_.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);p=new c["gb"](d,m)}Object.keys(p.geometry.morphAttributes).length>0&&k(p,i),p.name=t.createUniqueName(i.name||"mesh_"+e),N(p,i),f.extensions&&C(n,p,f),t.assignFinalMaterial(p),u.push(p)}if(1===u.length)return u[0];var v=new c["w"];for(l=0,h=u.length;l<h;l++)v.add(u[l]);return v}))},G.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new c["eb"](c["Q"].radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new c["db"](-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),N(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},G.prototype.loadAnimation=function(e){for(var t=this.json,r=t.animations[e],n=[],i=[],a=[],s=[],o=[],u=0,l=r.channels.length;u<l;u++){var h=r.channels[u],p=r.samplers[h.sampler],d=h.target,f=void 0!==d.node?d.node:d.id,m=void 0!==r.parameters?r.parameters[p.input]:p.input,v=void 0!==r.parameters?r.parameters[p.output]:p.output;n.push(this.getDependency("node",f)),i.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",v)),s.push(p),o.push(d)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(a),Promise.all(s),Promise.all(o)]).then((function(t){for(var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=[],l=0,h=n.length;l<h;l++){var p=n[l],d=i[l],f=a[l],m=s[l],v=o[l];if(void 0!==p){var g;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,L[v.path]){case L.weights:g=c["bb"];break;case L.rotation:g=c["kb"];break;case L.position:case L.scale:default:g=c["Gb"];break}var y=p.name?p.name:p.uuid,T=void 0!==m.interpolation?A[m.interpolation]:c["C"],x=[];L[v.path]===L.weights?p.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(y);var _=f.array;if(f.normalized){var b;if(_.constructor===Int8Array)b=1/127;else if(_.constructor===Uint8Array)b=1/255;else if(_.constructor==Int16Array)b=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");b=1/65535}for(var E=new Float32Array(_.length),M=0,S=_.length;M<S;M++)E[M]=_[M]*b;_=E}for(M=0,S=x.length;M<S;M++){var R=new g(x[M]+"."+L[v.path],d.array,_,T);"CUBICSPLINE"===m.interpolation&&(R.createInterpolant=function(e){return new w(this.times,this.values,this.getValueSize()/3,e)},R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(R)}}}var I=r.name?r.name:"animation_"+e;return new c["c"](I,void 0,u)}))},G.prototype.loadNode=function(e){var t=this.json,r=this.extensions,n=this,i=t.nodes[e],a=i.name?n.createUniqueName(i.name):"";return function(){var t=[];return void 0!==i.mesh&&t.push(n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,r=i.weights.length;t<r;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))),void 0!==i.camera&&t.push(n.getDependency("camera",i.camera).then((function(e){return n._getNodeRef(n.cameraCache,i.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var s;if(s=!0===i.isBone?new c["e"]:t.length>1?new c["w"]:1===t.length?t[0]:new c["cb"],s!==t[0])for(var o=0,u=t.length;o<u;o++)s.add(t[o]);if(i.name&&(s.userData.name=i.name,s.name=a),N(s,i),i.extensions&&C(r,s,i),void 0!==i.matrix){var l=new c["R"];l.fromArray(i.matrix),s.applyMatrix4(l)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return n.associations.set(s,{type:"nodes",index:e}),s}))},G.prototype.loadScene=function(){function e(t,r,n,i){var a=n.nodes[t];return i.getDependency("node",t).then((function(e){return void 0===a.skin?e:i.getDependency("skin",a.skin).then((function(e){t=e;for(var r=[],n=0,a=t.joints.length;n<a;n++)r.push(i.getDependency("node",t.joints[n]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var n=[],i=[],a=0,s=r.length;a<s;a++){var o=r[a];if(o){n.push(o);var u=new c["R"];void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new c["qb"](n,i),e.matrixWorld)}})),e}));var t})).then((function(t){r.add(t);var s=[];if(a.children)for(var o=a.children,u=0,c=o.length;u<c;u++){var l=o[u];s.push(e(l,t,n,i))}return Promise.all(s)}))}return function(t){var r=this.json,n=this.extensions,i=this.json.scenes[t],a=this,s=new c["w"];i.name&&(s.name=a.createUniqueName(i.name)),N(s,i),i.extensions&&C(n,s,i);for(var o=i.nodes||[],u=[],l=0,h=o.length;l<h;l++)u.push(e(o[l],s,r,a));return Promise.all(u).then((function(){return s}))}}(),e}(),h=(r("5b17"),r("3aab"),[115.23,39.55]),p=[116.23,41.55],d=[],f={renderer:null,camera:null,scene:null},m={viewer:null},v={props:{},data:function(){return{loader:null,publicPath:""}},mounted:function(){this.main()},methods:{main:function(){u["J"].defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmMjY1MzY3MC1mYWIwLTQ2ZDItYTdlZi0yNWEyZjU2MjAzOTQiLCJpZCI6Mzg4MzUsImlhdCI6MTYwNjg3MzkxNX0.gGDAumUmOxcrCTMRfrKZJjfZpYiLxGwJwSLlkDYt9BY",document.getElementById("cesiumContainer"),o=document.getElementById("ThreeContainer"),this.initCesium(),this.initThree(),this.init3DObject(),this.loop()},initCesium:function(){new u["a"]({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),new u["nb"]({url:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&{x}&y={y}&z={z}&s=Gali"});m.viewer=new u["rb"]("cesiumContainer",{infoBox:!1,selectionIndicator:!1,geocoder:!1,homeButton:!1,timeline:!1,navigationHelpButton:!1,fullscreenButton:!1,scene3DOnly:!0,animation:!1,imageryProvider:new u["a"]({url:"http://cache1.arcgisonline.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer"}),baseLayerPicker:!1});var e=u["e"].fromDegrees((h[0]+p[0])/2,(h[1]+p[1])/2-1,2e5);e,m.viewer.camera.flyTo({destination:e,orientation:{heading:u["P"].toRadians(0),pitch:u["P"].toRadians(-60),roll:u["P"].toRadians(0)},duration:3})},initThree:function(){var e=45,t=window.innerWidth,r=window.innerHeight,n=t/r,i=1,a=1e7;f.scene=new c["nb"],f.camera=new c["eb"](e,n,i,a),f.renderer=new c["Hb"]({alpha:!0}),o.appendChild(f.renderer.domElement)},init3DObject:function(){return s(regeneratorRuntime.mark((function e(){var t,r,n,i,a,s,o,l,v,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:g=function(){this.threeMesh=null,this.minWGS84=null,this.maxWGS84=null},t=u["e"].fromDegrees(115.23,39.55,0),r=u["P"].toRadians(135),n=0,i=0,a=new u["E"](r,n,i),s=u["lb"].headingPitchRollQuaternion(t,a),o={name:"SampleData/models/CesiumAir/model2.gltf",position:t,orientation:s,model:{uri:"SampleData/models/CesiumAir/model2.gltf",minimumPixelSize:128,maximumScale:2e4}},m.viewer.entities.add(o),l=new c["w"],f.scene.add(l),v=new g,v.threeMesh=l,v.minWGS84=h,v.maxWGS84=p,d.push(v);case 16:case"end":return e.stop()}}),e)})))()},createMesh:function(){var e=this;return new Promise((function(t,r){e.loader=new l,e.loader.load("SampleData/models/CesiumAir/model2.gltf",(function(e){var r=e.scene;r.children=r.children.map((function(e){return e.position.z+=15,e.rotation.x=Math.PI/2,e})),console.log(r),t(r)}),void 0,(function(e){console.error(e)}))}))},loop:function(){requestAnimationFrame(this.loop),this.renderCesium(),this.renderThreeObj()},renderCesium:function(){m.viewer.render()},renderThreeObj:function(){f.camera.fov=u["P"].toDegrees(m.viewer.camera.frustum.fovy);var e=function(e){return new c["Fb"](e.x,e.y,e.z)};d.forEach((function(t,r){h=d[r].minWGS84,p=d[r].maxWGS84;var n=u["e"].fromDegrees((h[0]+p[0])/2,(h[1]+p[1])/2),i=u["e"].fromDegrees((h[0]+p[0])/2,(h[1]+p[1])/2,1),a=e(u["e"].fromDegrees(h[0],h[1])),s=e(u["e"].fromDegrees(h[0],p[1])),o=(new c["Fb"]).subVectors(a,s).normalize();d[r].threeMesh.position.copy(n),d[r].threeMesh.lookAt(i.x,i.y,i.z),d[r].threeMesh.up.copy(o)})),f.camera.matrixAutoUpdate=!1;var t=m.viewer.camera.viewMatrix,r=m.viewer.camera.inverseViewMatrix;f.camera.lookAt(0,0,0),f.camera.matrixWorld.set(r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]),f.camera.matrixWorldInverse.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]);var n=o.clientWidth,i=o.clientHeight,a=n/i;f.camera.aspect=a,f.camera.updateProjectionMatrix(),f.renderer.setSize(n,i),f.renderer.clear(),f.renderer.render(f.scene,f.camera)}}},g=v,y=(r("4fb2"),r("c701")),T=Object(y["a"])(g,n,i,!1,null,"468e0151",null);t["default"]=T.exports},"3aab":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=r("acc5"),o=r("4d28"),u=r.n(o);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(){function e(t){n(this,e),c(this,"dimensions",["lng","lat"]),c(this,"radians",s["P"].toRadians(80)),this._GLMap=t,this._mapOffset=[0,0],this.dimensions=["lng","lat"]}return a(e,[{key:"setMapOffset",value:function(e){this._mapOffset=e}},{key:"getMap",value:function(){return this._GLMap}},{key:"fixLat",value:function(e){return e>=90?89.99999999999999:e<=-90?-89.99999999999999:e}},{key:"dataToPoint",value:function(e){var t=[99999,99999];e[1]=this.fixLat(e[1]);var r=s["e"].fromDegrees(e[0],e[1]);if(!r)return t;var n=this._GLMap.cartesianToCanvasCoordinates(r);return n?!(this._GLMap.mode===s["db"].SCENE3D&&s["e"].angleBetween(this._GLMap.camera.position,r)>this.radians)&&[n.x-this._mapOffset[0],n.y-this._mapOffset[1]]:t}},{key:"pointToData",value:function(e){this._mapOffset;var t=this._bmap.project([e[0]+e[0],e[1]+e[1]]);return[t.lng,t.lat]}},{key:"getViewRect",value:function(){var e=this._api;return new u.a.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())}},{key:"getRoamTransform",value:function(){return u.a.matrix.create()}},{key:"create",value:function(t,r){var n;this._api=r,t.eachComponent("GLMap",(function(t){var i=r.getZr().painter;if(i){var a=u.a.glMap;n=new e(a,r),n.setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=n}})),t.eachSeries((function(e){"GLMap"===e.get("coordinateSystem")&&(e.coordinateSystem=n)}))}}]),e}(),h=l;console.log(u.a);var p=function(){function e(t,r){n(this,e),this._viewer=t,this._isRegistered=!1,this._chartLayer=this._createLayerContainer(),this.option=r,this._chartLayer.setOption(r)}return a(e,[{key:"_createLayerContainer",value:function(){var e=this._viewer.scene,t=document.createElement("div");return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.right="0px",t.style.bottom="0px",t.style.width=e.canvas.width+"px",t.style.height=e.canvas.height+"px",t.style.pointerEvents="none",this._viewer.container.appendChild(t),this._echartsContainer=t,u.a.glMap=e,this._register(),u.a.init(t)}},{key:"_register",value:function(){this._isRegistered||(u.a.registerCoordinateSystem("GLMap",new h(u.a.glMap)),u.a.registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},(function(e,t){})),u.a.extendComponentModel({type:"GLMap",getBMap:function(){return this.__GLMap},defaultOption:{roam:!1}}),u.a.extendComponentView({type:"GLMap",init:function(e,t){this.api=t,u.a.glMap.postRender.addEventListener(this.moveHandler,this)},moveHandler:function(e,t){this.api.dispatchAction({type:"GLMapRoam"})},render:function(e,t,r){},dispose:function(){u.a.glMap.postRender.removeEventListener(this.moveHandler,this)}}),this._isRegistered=!0)}},{key:"dispose",value:function(){this._echartsContainer&&(this._viewer.container.removeChild(this._echartsContainer),this._echartsContainer=null),this._chartLayer&&(this._chartLayer.dispose(),this._chartLayer=null),this._isRegistered=!1}},{key:"destroy",value:function(){this.dispose()}},{key:"updateEchartsLayer",value:function(e){this._chartLayer&&this._chartLayer.setOption(e)}},{key:"getMap",value:function(){return this._viewer}},{key:"getEchartsLayer",value:function(){return this._chartLayer}},{key:"show",value:function(){this._echartsContainer&&(this._echartsContainer.style.visibility="visible")}},{key:"hide",value:function(){this._echartsContainer&&(this._echartsContainer.style.visibility="hidden")}}]),e}();s["EchartsLayer"]=p},"4fb2":function(e,t,r){"use strict";r("501e")},"501e":function(e,t,r){},"6a61":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new A(n||[]);return a._invoke=M(e,r,s),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",f="completed",m={};function v(){}function g(){}function y(){}var T={};T[a]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==r&&n.call(w,a)&&(T=w);var _=y.prototype=v.prototype=Object.create(T);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(i,a,s,o){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var i;function a(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function M(e,t,r){var n=h;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return O()}r.method=i,r.arg=a;while(1){var s=r.delegate;if(s){var o=S(s,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=l(e,t,r);if("normal"===u.type){if(n=r.done?f:p,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){while(++i<e.length)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:O}}function O(){return{value:t,done:!0}}return g.prototype=_.constructor=y,y.constructor=g,g.displayName=u(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(E.prototype),E.prototype[s]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var s=new E(c(t,r,n,i),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(_),u(_,o,"Generator"),_[a]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}}}]);
//# sourceMappingURL=chunk-6b09aa33.88f8e98e.js.map